{"title":"Testing - Stencil","description":"Testing overview.","url":"/docs/testing-overview","contributors":["adamdbradley","brandyscarney","camwiegert","kensodemann","nilssonja","simonhaenisch","tcmacdonald","manucorporat","mattdsteele","jthoms1"],"lastUpdated":"2019-11-13T08:11:45Z","headings":[{"id":"testing","level":1,"text":"Testing"},{"id":"unit-testing-vs-end-to-end-testing","level":2,"text":"Unit Testing vs. End-to-end Testing"},{"id":"testing-commands","level":2,"text":"Testing Commands"},{"id":"testing-configuration","level":3,"text":"Testing Configuration"},{"id":"running-and-debugging-tests-in-vs-code","level":2,"text":"Running and Debugging Tests in VS Code"},{"id":"other-resources","level":2,"text":"Other Resources"}],"srcPath":"./src/docs/testing/overview.md","hypertext":["div",null,["h1",{"id":"testing"},"\n  \n  Testing\n  \n"],"\n",["p",null,"Testing within Stencil is broken up into two distinct types: Unit tests and End-to-end (e2e) tests. Both types use ",["a",{"href":"https://jestjs.io/"},"Jest"]," as the JavaScript testing solution. The browser environment for end-to-end testing is done using ",["a",{"href":"https://pptr.dev/"},"Puppeteer"],", which provides many advantages Stencil can start to incorporate into its builds."],"\n\n",["h2",{"id":"unit-testing-vs-end-to-end-testing"},"\n  ",["a",{"class":"heading-link","href":"#unit-testing-vs-end-to-end-testing"},["app-icon",{"name":"link"}],"\n  Unit Testing vs. End-to-end Testing\n  "],"\n"],"\n",["p",null,"There are countless philosophies on how testing should be done, and what should be considered a unit test, end-to-end test or even integration tests. To simplify it all, Stencil breaks it down so developers have a defined description of when to use each type of testing."],"\n",["p",null,["strong",null,"Unit tests"]," focuses on testing a component's methods in isolation. For example, when a method is given the argument ",["code",null,"X"],", it should return ",["code",null,"Y"],"."],"\n",["p",null,["strong",null,"End-to-end tests"]," focus on how the components are rendered in the DOM and how the individual components work together. For example, when ",["code",null,"my-component"]," has the ",["code",null,"X"]," attribute, the child component then renders the text ",["code",null,"Y"],", and expects to receive the event ",["code",null,"Z"],". End-to-end tests use ",["a",{"href":"https://pptr.dev/"},"Puppeteer"]," instead of a Node environment. This allows end-to-end tests to run within an actual browser in order to provide more realistic results."],"\n",["p",null,"By not blurring the lines between JavaScript testing and DOM testing, tests can be built out quickly across large teams."],"\n\n",["h2",{"id":"testing-commands"},"\n  ",["a",{"class":"heading-link","href":"#testing-commands"},["app-icon",{"name":"link"}],"\n  Testing Commands\n  "],"\n"],"\n",["p",null,"Below is an example ",["code",null,"npm"]," script which can be added to the app's ",["code",null,"package.json"]," file. Notice the command is ",["code",null,"stencil test"],", with optional flags of ",["code",null,"--spec"]," for unit tests, and ",["code",null,"--e2e"]," for end-to-end tests."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token string"},"\"scripts\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token string"},"\"test\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"stencil test --spec\""],["span",{"class":"token punctuation"},","],"\n  ",["span",{"class":"token string"},"\"test.watch\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"stencil test --spec --watch\""],["span",{"class":"token punctuation"},","],"\n  ",["span",{"class":"token string"},"\"test.e2e\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"stencil test --e2e\""],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["p",null,"All of this configuration is included with the Stencil App Starter and the Stencil Component Starter so if you\nuse one of those templates to start your project, you should not have to add anything. This information is presented here primarily for informational purposes."],"\n\n",["h3",{"id":"testing-configuration"},"\n  ",["a",{"class":"heading-link","href":"#testing-configuration"},["app-icon",{"name":"link"}],"\n  Testing Configuration\n  "],"\n"],"\n",["p",null,"Stencil will apply defaults from data it has already gathered. For example, Stencil already knows what directories to look through, and what files are spec and e2e files. Jest can still be configured using the same config names, but now using the stencil config ",["code",null,"testing"]," property. Please see the ",["a",{"href":"/docs/config/testing"},"Testing Config docs"]," for more info."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Config ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"const"]," config",["span",{"class":"token operator"},":"]," Config ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"{"],"\n  testing",["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"{"],"\n    testPathIgnorePatterns",["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"["],["span",{"class":"token operator"},"..."],["span",{"class":"token punctuation"},"]"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  \n",["h2",{"id":"running-and-debugging-tests-in-vs-code"},"\n  ",["a",{"class":"heading-link","href":"#running-and-debugging-tests-in-vs-code"},["app-icon",{"name":"link"}],"\n  Running and Debugging Tests in VS Code\n  "],"\n"],"\n",["p",null,"Adding the following configurations to ",["code",null,".vscode/launch.json"]," will allow you to use the VS Code Debugger to run the Stencil test runner for the currently active file in your editor. Just make sure you're in the test file you want to run, then select the debug configuration respectively (depending on whether it's a spec or e2e test), and hit the play button."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token string"},"\"configurations\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"["],"\n    ",["span",{"class":"token punctuation"},"{"],"\n      ",["span",{"class":"token string"},"\"type\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"node\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"request\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"launch\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"name\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"E2E Test Current File\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"cwd\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"${workspaceFolder}\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"program\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"${workspaceFolder}/node_modules/.bin/stencil\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"args\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"test\""],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token string"},"\"--e2e\""],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token string"},"\"${relativeFile}\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"console\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"integratedTerminal\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"internalConsoleOptions\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"neverOpen\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"disableOptimisticBPs\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token boolean"},"true"],"\n    ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},","],"\n    ",["span",{"class":"token punctuation"},"{"],"\n      ",["span",{"class":"token string"},"\"type\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"node\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"request\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"launch\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"name\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"Spec Test Current File\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"cwd\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"${workspaceFolder}\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"program\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"${workspaceFolder}/node_modules/.bin/stencil\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"args\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"test\""],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token string"},"\"--spec\""],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token string"},"\"${relativeFile}\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"console\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"integratedTerminal\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"internalConsoleOptions\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"neverOpen\""],["span",{"class":"token punctuation"},","],"\n      ",["span",{"class":"token string"},"\"disableOptimisticBPs\""],["span",{"class":"token operator"},":"]," ",["span",{"class":"token boolean"},"true"],"\n    ",["span",{"class":"token punctuation"},"}"],"\n  ",["span",{"class":"token punctuation"},"]"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  \n",["h2",{"id":"other-resources"},"\n  ",["a",{"class":"heading-link","href":"#other-resources"},["app-icon",{"name":"link"}],"\n  Other Resources\n  "],"\n"],"\n",["ul",null,"\n",["li",null,["a",{"href":"https://www.joshmorony.com/the-basics-of-unit-testing-in-stencil-js/"},"The Basics of Unit Testing in StencilJS"]],"\n"]]}