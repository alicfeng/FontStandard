{"title":"Running Stencil with Deno - Stencil","description":"Deno, A secure runtime for JavaScript and TypeScript.","url":"/docs/deno","contributors":["adamdbradley"],"lastUpdated":"2020-08-15T02:03:45Z","headings":[{"id":"deno-runtime","level":1,"text":"Deno Runtime"},{"id":"installing-deno-stencil-cli","level":2,"text":"Installing Deno Stencil CLI"},{"id":"updating-deno-stencil-cli","level":3,"text":"Updating Deno Stencil CLI"},{"id":"running-deno-stencil-cli","level":2,"text":"Running Deno Stencil CLI"}],"srcPath":"./src/docs/guides/deno.md","hypertext":["div",null,["h1",{"id":"deno-runtime"},"\n  \n  Deno Runtime\n  \n"],"\n",["p",null,["em",null,["code",null,"EXPERIMENTAL"],": It's early days yet for Deno and how Stencil will work with it, so we'll label this experimental."]],"\n",["p",null,"Traditionally, Stencil and many of today's CLIs for the web ecosystem run on top of ",["a",{"href":"https://nodejs.org/"},"Node"],". The Stencil compiler, however, is not locked down to only a Node environment, but rather it can execute from any JavaScript runtime, such as a browser main thread, web worker thread, or the latest JS runtime ",["a",{"href":"https://deno.land/"},"Deno"],"! Deno is a simple, modern and secure runtime for JavaScript and TypeScript that uses V8 and is built in Rust. "],"\n",["ul",null,"\n",["li",null,["a",{"href":"https://deno.land/#installation"},"Deno Installation"]],"\n",["li",null,["a",{"href":"https://deno.land/manual"},"Deno Manual"]],"\n",["li",null,["a",{"href":"https://doc.deno.land/builtin/stable"},"Deno Runtime API"]],"\n"],"\n",["p",null,"Stencil's architecture allows it to be passed a system (",["code",null,"sys"],") that interacts with the runtime. For example, Node's ",["code",null,"fs"]," will use ",["code",null,"readdir()"]," and must be passed a callback, whereas Deno uses ",["code",null,"readDir()"]," (has a capital D) and returns a promise. The same concept is applied to the browser and web worker systems, which allows the compiler to stay generic and versatile for any JS runtime."],"\n\n",["h2",{"id":"installing-deno-stencil-cli"},"\n  ",["a",{"class":"heading-link","href":"#installing-deno-stencil-cli"},["app-icon",{"name":"link"}],"\n  Installing Deno Stencil CLI\n  "],"\n"],"\n",["p",null,"The Stencil compiler, and its Command-Line Interface (CLI), can also be executed with Deno, but it works differently than a traditional Node CLI. The biggest difference is that Deno does not have a centralized package manager, so Deno doesn't have an ",["code",null,"npm"]," equivalent."],"\n",["p",null,"With Deno there is no ",["code",null,"npm install"]," command, but instead you specify the external URL of the executable script to install. After ",["a",{"href":"https://deno.land/#installation"},"installing Deno"],", run the command:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-bash"},["code",{"class":"language-bash"},"deno ",["span",{"class":"token function"},"install"]," -n stencil --allow-read --allow-write --allow-net https://stenciljs.com/cli.ts"]],"\n  "],"\n  ",["p",null,"Let's break this down a little further to explain what this command is doing:"],"\n",["table",null,"\n",["thead",null,"\n",["tr",null,"\n",["th",null,"Command / Arg"],"\n",["th",null,"Description"],"\n"],"\n"],"\n",["tbody",null,["tr",null,"\n",["td",null,["code",null,"deno"]],"\n",["td",null,"The Deno command already ",["a",{"href":"https://deno.land/#installation"},"installed"],"     ."],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"install"]],"\n",["td",null,["a",{"href":"https://deno.land/manual/tools/script_installer"},"Installer script"]," argument."],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"-n"]],"\n",["td",null,"The name you'll give the executable your installing."],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"stencil"]],"\n",["td",null,["code",null,"stencil"]," is the name of the executable in this example, but can be customized to to whateve r you'd like."],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"--allow-read"]],"\n",["td",null,"The CLI will need to access files, so this option allows it to read local files."],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"--allow-write"]],"\n",["td",null,"The CLI will also need to write files."],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"--allow-net"]],"\n",["td",null,"The CLI will need to access the net to install dependencies."],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"https://stenciljs.com/cli.ts"]],"\n",["td",null,"The location of the Stencil's Deno installer."],"\n"],"\n"]],"\n",["p",null,"Don't worry, this command doesn't need to be ran everytime you're running Stencil with Deno, but instead it's just installing it, and giving your machine the executable name of ",["code",null,"stencil"],". During the installing you'll see where additional script files are coming from, which in our case is ",["code",null,"https://cdn.jsdelivr.net/npm/"],"."],"\n",["p",null,"After installing you'll then have the global ",["code",null,"stencil"]," command ready to be used and you can test it out by running the CLI's help command:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-bash"},["code",{"class":"language-bash"},"stencil ",["span",{"class":"token builtin class-name"},"help"]]],"\n  "],"\n  \n",["h3",{"id":"updating-deno-stencil-cli"},"\n  ",["a",{"class":"heading-link","href":"#updating-deno-stencil-cli"},["app-icon",{"name":"link"}],"\n  Updating Deno Stencil CLI\n  "],"\n"],"\n",["p",null,"To update the installed Deno Stencil CLI, add the ",["code",null,"-f"]," option to \"force\" overwriting the existing executable and reinstalling the latest."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-bash"},["code",{"class":"language-bash"},"deno ",["span",{"class":"token function"},"install"]," -n stencil --allow-read --allow-write --allow-net -f https://stenciljs.com/cli.ts"]],"\n  "],"\n  \n",["h2",{"id":"running-deno-stencil-cli"},"\n  ",["a",{"class":"heading-link","href":"#running-deno-stencil-cli"},["app-icon",{"name":"link"}],"\n  Running Deno Stencil CLI\n  "],"\n"],"\n",["p",null,"After the installer script has successfully ran, the ",["code",null,"stencil"]," executable is ready to be used with the same options as the Node CLI. See the ",["a",{"href":"/docs/cli"},"CLI docs"]," for all available options or run ",["code",null,"stencil help"],"."],"\n",["p",null,"Even though ",["code",null,"stencil"]," is now a global executable, its goal is still aimed at running each individual application's local Stencil version. The installed command is simply the entry, but it's not locked into a specific compiler version. When the ",["code",null,"stencil"]," command is ran, it looks to use the locally installed install Stencil compiler, and if one isn't already installed, it'll dynamically load the latest Stencil version."],"\n",["p",null,["em",null,"The Deno CLI is still experimental, the generate command has not been ported yet."]]]}