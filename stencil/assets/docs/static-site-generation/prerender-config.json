{"title":"Prerender Config - Stencil","description":"Prerender Config","url":"/docs/prerender-config","contributors":["adamdbradley","ryan3E0","dgautsch"],"headings":[{"id":"prerender-config-for-static-site-generation-ssg","level":1,"text":"Prerender Config for Static Site Generation (SSG)"},{"id":"individual-page-hydrate-options","level":2,"text":"Individual Page Hydrate Options"}],"srcPath":"./src/docs/static-site-generation/prerender-config.md","hypertext":["div",null,["h1",{"id":"prerender-config-for-static-site-generation-ssg"},"\n  \n  Prerender Config for Static Site Generation (SSG)\n  \n"],"\n",["p",null,"As of ",["code",null,"1.13.0"],", the optional prerender config can be used while prerendering a ",["code",null,"www"]," output target. The ",["code",null,"prerender.config.ts"]," file can further update the parsed document of each page, before it is serialized to HTML."],"\n",["p",null,"Within ",["code",null,"stencil.config.ts"],", set the path to the prerendering config file path using the ",["code",null,"prerenderConfig"],"\nproperty, such as:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Config ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"const"]," config",["span",{"class":"token operator"},":"]," Config ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"{"],"\n  outputTargets",["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"["],"\n    ",["span",{"class":"token punctuation"},"{"],"\n      ",["span",{"class":"token keyword"},"type"],["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"'www'"],["span",{"class":"token punctuation"},","],"\n      baseUrl",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"'https://stenciljs.com/'"],["span",{"class":"token punctuation"},","],"\n      prerenderConfig",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"'./prerender.config.ts'"],["span",{"class":"token punctuation"},","],"\n    ",["span",{"class":"token punctuation"},"}"],"\n  ",["span",{"class":"token punctuation"},"]"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  ",["p",null,"Next, inside of the ",["code",null,"prerender.config.ts"]," file, it should export a ",["code",null,"config"]," object using the ",["code",null,"PrerenderConfig"]," interface."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," PrerenderConfig ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"const"]," config",["span",{"class":"token operator"},":"]," PrerenderConfig ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token operator"},"..."],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  ",["table",null,"\n",["thead",null,"\n",["tr",null,"\n",["th",null,"Config"],"\n",["th",null,"Description"],"\n",["th",null,"Default"],"\n"],"\n"],"\n",["tbody",null,["tr",null,"\n",["td",null,["code",null,"afterHydrate(document, url)"]],"\n",["td",null,"Run after each ",["code",null,"document"]," is hydrated, but before it is serialized into an HTML string. Hook is passed the ",["code",null,"document"]," and its ",["code",null,"URL"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"beforeHydrate(document, url)"]],"\n",["td",null,"Run before each ",["code",null,"document"]," is hydrated. Hook is passed the ",["code",null,"document"]," it's ",["code",null,"URL"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"afterSerializeTemplate(html)"]],"\n",["td",null,"Runs after the template Document object has serialize into an HTML formatted string. Returns an HTML string to be used as the base template for all prerendered pages."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"beforeSerializeTemplate(document)"]],"\n",["td",null,"Runs before the template Document object is serialize into an HTML formatted string. Returns the Document to be serialized which will become the base template html for all prerendered pages."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"canonicalUrl(url)"]],"\n",["td",null,"A hook to be used to generate the canonical ",["code",null,"<link>"]," tag which goes in the ",["code",null,"<head>"]," of every prerendered page. Returning ",["code",null,"null"]," will not add a canonical url tag to the page."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"crawlUrls"]],"\n",["td",null,"While prerendering, crawl same-origin URLs found within ",["code",null,"<a href>"]," elements."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"entryUrls"]],"\n",["td",null,"URLs to start the prerendering from. By default the root URL of ",["code",null,"/"]," is used."],"\n",["td",null,["code",null,"['/']"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"filterAnchor(attrs, base)"]],"\n",["td",null,"Return ",["code",null,"true"]," the given ",["code",null,"<a>"]," element should be crawled or not."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"filterUrl(url, base)"]],"\n",["td",null,"Return ",["code",null,"true"]," if the given URL should be prerendered or not."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"filePath(url, filePath)"]],"\n",["td",null,"Returns the file path which the prerendered HTML content should be written to."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"hydrateOptions(url)"]],"\n",["td",null,"Returns the hydrate options to use for each individual prerendered page."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"loadTemplate(filePath)"]],"\n",["td",null,"Returns the template file's content. The template is the base HTML used for all prerendered pages."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"normalizeUrl(href, base)"]],"\n",["td",null,"Used to normalize the page's URL from a given a string and the current page's base URL. Largely used when reading an anchor's ",["code",null,"href"]," attribute value and normalizing it into a ",["code",null,"URL"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"staticSite"]],"\n",["td",null,"Static Site Generated (SSG). Does not include Stencil's clientside JavaScript, custom elements or preload modules."],"\n",["td",null,["code",null,"false"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"trailingSlash"]],"\n",["td",null,"If the prerenndered URLs should have a trailing \"/\"\" or not"],"\n",["td",null,["code",null,"false"]],"\n"],"\n"]],"\n\n",["h2",{"id":"individual-page-hydrate-options"},"\n  ",["a",{"class":"heading-link","href":"#individual-page-hydrate-options"},["app-icon",{"name":"link"}],"\n  Individual Page Hydrate Options\n  "],"\n"],"\n",["p",null,"Beyond settings for the entire prerendering process with ",["code",null,"prerender.config.ts"],", you can also\nset individual hydrate options per each page. The ",["code",null,"hydrateOptions(url)"]," hook can be used to futher configure each page. Below is an example of the prerender config with the ",["code",null,"hydrateOptions()"]," hook, which returns options for each page."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," PrerenderConfig ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"const"]," config",["span",{"class":"token operator"},":"]," PrerenderConfig ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token function"},"hydrateOptions"],["span",{"class":"token punctuation"},"("],["span",{"class":"token parameter"},"url"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"{"],"\n      prettyHtml",["span",{"class":"token operator"},":"]," ",["span",{"class":"token boolean"},"true"],"\n    ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n\n"]],"\n  "],"\n  ",["table",null,"\n",["thead",null,"\n",["tr",null,"\n",["th",null,"Option"],"\n",["th",null,"Description"],"\n",["th",null,"Default"],"\n"],"\n"],"\n",["tbody",null,["tr",null,"\n",["td",null,["code",null,"addModulePreloads"]],"\n",["td",null,"Adds ",["code",null,"<link rel=\"modulepreload\">"]," for modules that will eventually be requested."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"approximateLineWidth"]],"\n",["td",null,"Sets an approximate line width the HTML should attempt to stay within. Note that this is \"approximate\", in that HTML may often not be able to be split at an exact line width. Additionally, new lines created is where HTML naturally already has whitespce, such as before an attribute or spaces between words."],"\n",["td",null,["code",null,"100"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"canonicalUrl"]],"\n",["td",null,"Sets the ",["code",null,"href"]," attribute on the ",["code",null,"<link rel=\"canonical\">"]," tag within the ",["code",null,"<head>"],". If the value is not defined it will ensure a canonical link tag is no included in the ",["code",null,"<head>"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"clientHydrateAnnotations"]],"\n",["td",null,"Include the HTML comments and attributes used by the clientside JavaScript to read the structure of the HTML and rebuild each component."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"constrainTimeouts"]],"\n",["td",null,"Constrain ",["code",null,"setTimeout()"]," to 1ms, but still async. Also only allows ",["code",null,"setInterval()"]," to fire once, also constrained to 1ms."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"cookie"]],"\n",["td",null,"Sets ",["code",null,"document.cookie"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"direction"]],"\n",["td",null,"Sets the ",["code",null,"dir"]," attribute on the top level ",["code",null,"<html>"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"excludeComponents"]],"\n",["td",null,"Component tag names listed here will not be prerendered, nor will hydrated on the clientside. Components listed here will be ignored as custom elements and treated no differently than a ",["code",null,"<div>"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"inlineExternalStyleSheets"]],"\n",["td",null,"External stylesheets from ",["code",null,"<link rel=\"stylesheet\">"]," are instead inlined into ",["code",null,"<style>"]," elements."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"language"]],"\n",["td",null,"Sets the ",["code",null,"lang"]," attribute on the top level ",["code",null,"<html>"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"maxHydrateCount"]],"\n",["td",null,"Maximum number of components to hydrate on one page."],"\n",["td",null,["code",null,"300"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"minifyScriptElements"]],"\n",["td",null,"Minify JavaScript content within ",["code",null,"<script>"]," elements."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"minifyStyleElements"]],"\n",["td",null,"Minify CSS content within ",["code",null,"<style>"]," elements."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"prettyHtml"]],"\n",["td",null,"Format the HTML in a nicely indented format."],"\n",["td",null,["code",null,"false"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"referrer"]],"\n",["td",null,"Sets ",["code",null,"document.referrer"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"removeAttributeQuotes"]],"\n",["td",null,"Remove quotes from attribute values when possible."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"removeBooleanAttributeQuotes"]],"\n",["td",null,"Remove the ",["code",null,"=\"\""]," from standardized ",["code",null,"boolean"]," attributes, such as ",["code",null,"hidden"]," or ",["code",null,"checked"],"."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"removeEmptyAttributes"]],"\n",["td",null,"Remove these standardized attributes when their value is empty: ",["code",null,"class"],", ",["code",null,"dir"],", ",["code",null,"id"],", ",["code",null,"lang"],", and ",["code",null,"name"],", ",["code",null,"title"],"."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"removeHtmlComments"]],"\n",["td",null,"Remove HTML comments."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"removeScripts"]],"\n",["td",null,"Removes every ",["code",null,"<script>"]," element found in the ",["code",null,"document"],"."],"\n",["td",null,["code",null,"false"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"removeUnusedStyles"]],"\n",["td",null,"Removes CSS not used by elements within the ",["code",null,"document"],"."],"\n",["td",null,["code",null,"true"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"resourcesUrl"]],"\n",["td",null,"The url the runtime uses for the resources, such as the assets directory."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"runtimeLogging"]],"\n",["td",null,"Prints out runtime console logs to the NodeJS process."],"\n",["td",null,["code",null,"false"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"staticComponents"]],"\n",["td",null,"Component tags listed here will only be prerendered or serverside-rendered and will not be clientside hydrated. This is useful for components that are not dynamic and do not need to be defined as a custom element within the browser. For example, a header or footer component would be a good example that may not require any clientside JavaScript."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"staticDocument"]],"\n",["td",null,"Entire ",["code",null,"document"]," should be static. This is useful for specific pages that should be static, rather than the entire site. If the whole site should be static, use the ",["code",null,"staticSite"]," property on the prerender config instead. If only certain components should be static then use ",["code",null,"staticComponents"]," instead."],"\n",["td",null,["code",null,"false"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"timeout"]],"\n",["td",null,"The amount of milliseconds to wait for a page to finish rendering until a timeout error is thrown."],"\n",["td",null,["code",null,"15000"]],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"title"]],"\n",["td",null,"Sets ",["code",null,"document.title"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"url"]],"\n",["td",null,"Sets ",["code",null,"location.href"],"."],"\n",["td",null],"\n"],"\n",["tr",null,"\n",["td",null,["code",null,"userAgent"]],"\n",["td",null,"Sets ",["code",null,"navigator.userAgent"],"."],"\n",["td",null],"\n"],"\n"]]]}