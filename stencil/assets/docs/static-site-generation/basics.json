{"title":"Static Site Generation Basics in Stencil - Stencil","description":"Quick introducgion to configuring and using Static Site Generation in Stencil","url":"/docs/static-site-generation-basics","contributors":["mlynch","adamdbradley"],"headings":[{"id":"static-site-generation-basics","level":1,"text":"Static Site Generation Basics"},{"id":"static-build","level":2,"text":"Static Build"},{"id":"rendering-dynamic-data","level":2,"text":"Rendering Dynamic Data"},{"id":"integration-with-a-router","level":2,"text":"Integration with a Router"},{"id":"page-and-url-discovery","level":2,"text":"Page and URL Discovery"},{"id":"things-to-watch-for","level":2,"text":"Things to Watch For"}],"srcPath":"./src/docs/static-site-generation/basics.md","hypertext":["div",null,["h1",{"id":"static-site-generation-basics"},"\n  \n  Static Site Generation Basics\n  \n"],"\n",["p",null,"Rendering components at build time (rather than purely server or client-time), can add significant performance improvements to your app, and maximize SEO impact."],"\n",["p",null,"Using Static Site Generation in Stencil requires running a build command, returning promises from component lifecycle methods that fetch dynamic data, and ensuring all known URLs are properly discovered and built."],"\n\n",["h2",{"id":"static-build"},"\n  ",["a",{"class":"heading-link","href":"#static-build"},["app-icon",{"name":"link"}],"\n  Static Build\n  "],"\n"],"\n",["p",null,"Stencil doesn't prerender components by default. However, the build can be made to prerender using the ",["code",null,"--prerender"]," flag:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-bash"},["code",{"class":"language-bash"},"stencil build --prerender"]],"\n  "],"\n  \n",["h2",{"id":"rendering-dynamic-data"},"\n  ",["a",{"class":"heading-link","href":"#rendering-dynamic-data"},["app-icon",{"name":"link"}],"\n  Rendering Dynamic Data\n  "],"\n"],"\n",["p",null,"Many components need to render based on data fetched from a server. Stencil handles this by allowing components to return ",["code",null,"Promise"],"'s from lifecycle methods like ",["code",null,"componentWillLoad"]," (this can be achieved by using ",["code",null,"async/await"]," as well)."],"\n",["p",null,"For example, this is how to have Stencil wait to render a component until it fetches data from the server:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-typescript"},["code",{"class":"language-typescript"},["span",{"class":"token keyword"},"async"]," ",["span",{"class":"token function"},"componentWillLoad"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"const"]," ret ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token keyword"},"await"]," ",["span",{"class":"token function"},"fetch"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'https://.../api'"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n\n  ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"thing ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token keyword"},"await"]," ret",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"json"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  \n",["h2",{"id":"integration-with-a-router"},"\n  ",["a",{"class":"heading-link","href":"#integration-with-a-router"},["app-icon",{"name":"link"}],"\n  Integration with a Router\n  "],"\n"],"\n",["p",null,"Since Stencil will actually navigate to and execute components, it has full support for a router, including Stencil Router."],"\n",["p",null,"There are no changes necessary to access route params and matches. However, make sure your routes can accept a trailing slash as prerendered static content will be treated as loading an ",["code",null,"index.html"]," file at that path, and so the browser may append a trailing slash."],"\n",["p",null,"In particular, if using Stencil Router, double check usage of ",["code",null,"exact={true}"]," which could cause your routes to not match when loaded with a trailing slash."],"\n\n",["h2",{"id":"page-and-url-discovery"},"\n  ",["a",{"class":"heading-link","href":"#page-and-url-discovery"},["app-icon",{"name":"link"}],"\n  Page and URL Discovery\n  "],"\n"],"\n",["p",null,"By default, Stencil crawls your app starting at base URL of ",["code",null,"/"]," and discovers all paths that need to be indexed. By default this will only discover pages that are linked at build time, but can be easily configured to build any possible URL for the app."],"\n",["p",null,"As each page is generated and new links are found, Stencil will continue to crawl and prerender pages."],"\n",["p",null,"See the ",["a",{"href":"/docs/prerender-config"},"prerender config"]," docs to see how this can be customized further."],"\n\n",["h2",{"id":"things-to-watch-for"},"\n  ",["a",{"class":"heading-link","href":"#things-to-watch-for"},["app-icon",{"name":"link"}],"\n  Things to Watch For\n  "],"\n"],"\n",["p",null,"There may be some areas of your code that should absolutely not run while prerendering. To help avoid certain code Stencil provides a ",["code",null,"Build.isBrowser"]," build conditional to tell prerendering to skip over. Here is an example of how to use this utility:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Build ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token function"},"connectedCallback"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token comment"},"// Build.isBrowser is true when running in the"],"\n  ",["span",{"class":"token comment"},"// browser and false when being prerendered"],"\n\n  ",["span",{"class":"token keyword"},"if"]," ",["span",{"class":"token punctuation"},"("],"Build",["span",{"class":"token punctuation"},"."],"isBrowser",["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token builtin"},"console"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"log"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'running in browser'"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"else"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token builtin"},"console"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"log"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'running in node while prerendering'"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["p",null,"Also note that the actual runtime generated for the browser builds will not include code that has been excluded because of the ",["code",null,"if (Build.isBrowser)"]," statement. In the above example, only ",["code",null,"console.log('running in browser')"]," would be included within the component's runtime."]]}