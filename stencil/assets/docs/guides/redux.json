{"title":"Redux - Stencil","description":"Redux","url":"/docs/stencil-redux","contributors":["jthoms1","adamdbradley","corysmc","bitflower"],"headings":[{"id":"what-is-redux","level":2,"text":"What is Redux?"},{"id":"1-install-dependencies","level":2,"text":"1. Install dependencies:"},{"id":"2-type-your-redux-store","level":2,"text":"2. Type your Redux store"},{"id":"3-create-store","level":2,"text":"3. Create store"},{"id":"4-create-reducers","level":2,"text":"4. Create reducers"},{"id":"5-initialize-store","level":2,"text":"5. Initialize Store"},{"id":"6-mapstatetoprops-within-your-components","level":2,"text":"6. mapStateToProps within your components"},{"id":"7-type-your-actions","level":2,"text":"7. Type your actions"},{"id":"8-create-actions","level":2,"text":"8. Create Actions"},{"id":"9-mapdispatchtoprops-to-call-functions-that-change-state","level":2,"text":"9. mapDispatchToProps to call functions that change state"},{"id":"10-handling-actions-to-mutate-your-app-state","level":2,"text":"10. handling actions to mutate your app state"},{"id":"other-resources","level":3,"text":"Other Resources"}],"srcPath":"./src/docs/guides/redux.md","hypertext":["div",null,["p",null,"Want to skip the tutorial and just check out the code?\n",["a",{"href":"https://github.com/corysmc/ionic-pwa-stencil-redux"},"https://github.com/corysmc/ionic-pwa-stencil-redux"]],"\n\n",["h2",{"id":"what-is-redux"},"\n  ",["a",{"class":"heading-link","href":"#what-is-redux"},["app-icon",{"name":"link"}],"\n  What is Redux?\n  "],"\n"],"\n",["p",null,"Redux is a state management library that separates app state and business logic from your view, and makes that state available across any of your stencil components, which makes it a great addition to stencil when building a PWA with stencil. For more info on Redux, ",["a",{"href":"https://redux.js.org"},"check out their docs"]],"\n",["p",null,"Although redux may feel like \"a lot of boilerplate code\" in scalable applications the benefits can outweigh the cost."],"\n",["ol",null,"\n",["li",null,"Redux Store: backbone of redux, includes callback functions to getState and \"dispatch\" functions to change state."],"\n",["li",null,"Redux Reducers: reducers manage a global state object"],"\n",["li",null,"Redux Actions: functions that are called to change state."],"\n",["li",null,"mapStateToProps: used to map your reducer state to your existing components"],"\n",["li",null,"mapDispatchToProps: used to map your redux actions to your existing components."],"\n"],"\n",["p",null,"For more info on Redux, ",["a",{"href":"https://redux.js.org"},"check out their docs"]],"\n\n",["h2",{"id":"1-install-dependencies"},"\n  ",["a",{"class":"heading-link","href":"#1-install-dependencies"},["app-icon",{"name":"link"}],"\n  1. Install dependencies:\n  "],"\n"],"\n",["ul",null,"\n",["li",null,"init stencil project ",["code",null,"npm init stencil"]],"\n",["li",null,"redux ",["code",null,"npm i redux"]],"\n",["li",null,"stencil redux ",["code",null,"npm i @stencil/redux"]],"\n",["li",null,"redux Devtools Extension (optional) ",["code",null,"npm i redux-devtools-extension"]],"\n",["li",null,"redux thunk (optional) ",["code",null,"npm i redux-thunk"]],"\n"],"\n\n",["h2",{"id":"2-type-your-redux-store"},"\n  ",["a",{"class":"heading-link","href":"#2-type-your-redux-store"},["app-icon",{"name":"link"}],"\n  2. Type your Redux store\n  "],"\n"],"\n",["blockquote",null,"\n",["p",null,"Having a strongly typed reducer will really speed up development in the future, especially if and when your application structure changes. Here’s an example of how to set the types for your root reducer."],"\n"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// src/interfaces.d.ts"],"\n\n",["span",{"class":"token keyword"},"interface"]," ",["span",{"class":"token class-name"},"UserState"]," ",["span",{"class":"token punctuation"},"{"],"\n  name",["span",{"class":"token operator"},":"]," ",["span",{"class":"token builtin"},"string"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],"\n\n",["span",{"class":"token keyword"},"interface"]," ",["span",{"class":"token class-name"},"MyAppState"]," ",["span",{"class":"token punctuation"},"{"],"\n  user",["span",{"class":"token operator"},":"]," UserState",["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  \n",["h2",{"id":"3-create-store"},"\n  ",["a",{"class":"heading-link","href":"#3-create-store"},["app-icon",{"name":"link"}],"\n  3. Create store\n  "],"\n"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/store/index.ts"],"\n\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," createStore",["span",{"class":"token punctuation"},","]," applyMiddleware ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"redux\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," thunk ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"redux-thunk\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," rootReducer ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"./reducers\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," composeWithDevTools ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"redux-devtools-extension/developmentOnly\""],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"const"]," configureStore ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"("],"preloadedState",["span",{"class":"token operator"},":"]," Partial",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],["span",{"class":"token class-name"},"MyAppState"]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},") =>\n  createStore(\n    rootReducer,\n    preloadedState,\n    composeWithDevTools(applyMiddleware(thunk))\n  );"]]],"\n  "],"\n  \n",["h2",{"id":"4-create-reducers"},"\n  ",["a",{"class":"heading-link","href":"#4-create-reducers"},["app-icon",{"name":"link"}],"\n  4. Create reducers\n  "],"\n"],"\n",["p",null,"Reducers are a way to separate your app logic. Redux has a function to combine these separate states into one using 'combineReducers'. Your root reducer will look something like this:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/store/reducers/index.ts"],"\n\n",["span",{"class":"token keyword"},"import"]," user ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"./user\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," combineReducers ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"redux\""],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"const"]," rootReducer ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token function"},"combineReducers"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  user\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"default"]," rootReducer",["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  ",["p",null,"Your user reducer might look something like this:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/store/reducers/user.ts"],"\n\n",["span",{"class":"token keyword"},"const"]," getInitialState ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token operator"},":"]," ",["span",{"class":"token parameter"},"UserState"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"{"],"\n    name",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"StencilJS\""],"\n  ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"const"]," user ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"("],"\n  state ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token function"},"getInitialState"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},","],"\n  action",["span",{"class":"token operator"},":"]," ",["span",{"class":"token builtin"},"any"]," ",["span",{"class":"token comment"},"/*for now...*/"],"\n",["span",{"class":"token punctuation"},")"],["span",{"class":"token operator"},":"]," ",["span",{"class":"token parameter"},"UserState"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"switch"]," ",["span",{"class":"token punctuation"},"("],"action",["span",{"class":"token punctuation"},"."],["span",{"class":"token keyword"},"type"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token comment"},"// here's where we handle actions"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n  ",["span",{"class":"token keyword"},"return"]," state",["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"default"]," user",["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  \n",["h2",{"id":"5-initialize-store"},"\n  ",["a",{"class":"heading-link","href":"#5-initialize-store"},["app-icon",{"name":"link"}],"\n  5. Initialize Store\n  "],"\n"],"\n",["p",null,"Initialize the store from within your root component. The store can then be accessed from within other components, which will be shown in the next step."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/components/app-root/app-root.tsx"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token string"},"\"@stencil/redux\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," Prop",["span",{"class":"token punctuation"},","]," State",["span",{"class":"token punctuation"},","]," h ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"@stencil/core\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Store ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"@stencil/redux\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," configureStore ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"../../store\""],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"app-root\""],["span",{"class":"token punctuation"},","],"\n  styleUrl",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"app-root.css\""],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"MyApp"]," ",["span",{"class":"token punctuation"},"{"],"\n  @",["span",{"class":"token function"},"State"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n  name",["span",{"class":"token operator"},":"]," MyAppState",["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"user\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"name\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"]," context",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"store\""]," ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n  store",["span",{"class":"token operator"},":"]," Store",["span",{"class":"token punctuation"},";"],"\n\n  ",["span",{"class":"token keyword"},"async"]," ",["span",{"class":"token function"},"componentWillLoad"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"store",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"setStore"],["span",{"class":"token punctuation"},"("],["span",{"class":"token function"},"configureStore"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"store",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"mapStateToProps"],["span",{"class":"token punctuation"},"("],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token parameter"},"state",["span",{"class":"token operator"},":"]," MyAppState"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n      ",["span",{"class":"token keyword"},"const"]," ",["span",{"class":"token punctuation"},"{"],"\n        user",["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"{"]," name ",["span",{"class":"token punctuation"},"}"],"\n      ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token operator"},"="]," state",["span",{"class":"token punctuation"},";"],"\n      ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"{"],"\n        name\n      ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n    ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n\n  ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"("],"\n      ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"div"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n        Hello, my name is "],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"name",["span",{"class":"token punctuation"},"}"],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"p"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n          "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"my-name-input-component"]," ",["span",{"class":"token punctuation"},"/>"]],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"p"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n      "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"div"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["p",null,"You can now see ",["code",null,"Hello, my name is StencilJS"],", and that data is coming from your redux store!!\nNext lets access that state from within a child component."],"\n\n",["h2",{"id":"6-mapstatetoprops-within-your-components"},"\n  ",["a",{"class":"heading-link","href":"#6-mapstatetoprops-within-your-components"},["app-icon",{"name":"link"}],"\n  6. mapStateToProps within your components\n  "],"\n"],"\n",["p",null,"To access the store from within any of your child components you need to use the context api to access the store."],"\n",["blockquote",null,"\n",["p",null,"⚠️ Warning the ",["code",null,"context"]," api will be deprecated soon, at which point these docs will be updated... but for now this is the correct way to include the redux store in each component."],"\n"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/components/my-name-input-component/my-name-input-component.tsx"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," State",["span",{"class":"token punctuation"},","]," Prop",["span",{"class":"token punctuation"},","]," h ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"@stencil/core\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Store",["span",{"class":"token punctuation"},","]," Unsubscribe ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"@stencil/redux\""],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"my-name-input-component\""],["span",{"class":"token punctuation"},","],"\n  styleUrl",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"name-input-component.css\""],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"NameInputComponent"]," ",["span",{"class":"token punctuation"},"{"],"\n  storeUnsubscribe",["span",{"class":"token operator"},":"]," Unsubscribe",["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"State"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n  name",["span",{"class":"token operator"},":"]," MyAppState",["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"user\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"name\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"]," context",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"store\""]," ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n  store",["span",{"class":"token operator"},":"]," Store",["span",{"class":"token punctuation"},";"],"\n\n  ",["span",{"class":"token function"},"componentWillLoad"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"storeUnsubscribe ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"store",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"mapStateToProps"],["span",{"class":"token punctuation"},"("],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token parameter"},"state",["span",{"class":"token operator"},":"]," MyAppState"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n      ",["span",{"class":"token keyword"},"const"]," ",["span",{"class":"token punctuation"},"{"],"\n        user",["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"{"]," name ",["span",{"class":"token punctuation"},"}"],"\n      ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token operator"},"="]," state",["span",{"class":"token punctuation"},";"],"\n      ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"{"],"\n        name\n      ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n    ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n\n  ",["span",{"class":"token function"},"componentDidUnload"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"storeUnsubscribe"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n\n  ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"p"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"name",["span",{"class":"token punctuation"},"}"],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"p"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["p",null,"Notice above we are:"],"\n",["ol",null,"\n",["li",null,"Creating a state variable"],"\n",["li",null,"Mapping that state variable to our redux store"],"\n",["li",null,"Displaying it in the render function."],"\n",["li",null,"Unsubscribing to the state changes when the component unloads."],"\n"],"\n",["blockquote",null,"\n",["p",null,"Note that the order you return your variables ",["strong",null,"does"]," matter within the mapStateToProps function, they will be mapped in the order you return them."],"\n"],"\n",["p",null,"Next we want to change the name ",["code",null,"StencilJS"]," and update our state to reflect that new name across our app. Changing state happens via actions. First we're going to create types for our actions..."],"\n\n",["h2",{"id":"7-type-your-actions"},"\n  ",["a",{"class":"heading-link","href":"#7-type-your-actions"},["app-icon",{"name":"link"}],"\n  7. Type your actions\n  "],"\n"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/store/actions/index.ts"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," SetUserName ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"./user\""],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"interface"]," ",["span",{"class":"token class-name"},"NullAction"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"type"],["span",{"class":"token operator"},":"]," TypeKeys",["span",{"class":"token punctuation"},"."],["span",{"class":"token constant"},"NULL"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],"\n\n",["span",{"class":"token comment"},"// Keep this type updated with each known action"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"type"]," ",["span",{"class":"token class-name"},"ActionTypes"]," ",["span",{"class":"token operator"},"="]," NullAction ",["span",{"class":"token operator"},"|"]," SetUserName",["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"enum"]," TypeKeys ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token comment"},"// Won't match anything"],"\n  ",["span",{"class":"token constant"},"NULL"]," ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token string"},"\"NULL\""],["span",{"class":"token punctuation"},","],"\n  ",["span",{"class":"token constant"},"ERROR"]," ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token string"},"\"ERROR\""],["span",{"class":"token punctuation"},","],"\n  ",["span",{"class":"token constant"},"SET_USER_NAME"]," ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token string"},"\"SET_USER_NAME\""],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  \n",["h2",{"id":"8-create-actions"},"\n  ",["a",{"class":"heading-link","href":"#8-create-actions"},["app-icon",{"name":"link"}],"\n  8. Create Actions\n  "],"\n"],"\n",["p",null,"Typically you'll have an action file for each reducer, as shown below:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/store/actions/user.ts"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," TypeKeys ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"./index\""],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"interface"]," ",["span",{"class":"token class-name"},"SetUserName"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"type"],["span",{"class":"token operator"},":"]," TypeKeys",["span",{"class":"token punctuation"},"."],["span",{"class":"token constant"},"SET_USER_NAME"],["span",{"class":"token punctuation"},";"],"\n  name",["span",{"class":"token operator"},":"]," ",["span",{"class":"token builtin"},"string"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"const"]," ",["span",{"class":"token function-variable function"},"setUserName"]," ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token parameter"},"name",["span",{"class":"token operator"},":"]," string"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token parameter"},"dispatch",["span",{"class":"token punctuation"},","]," _getState"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"const"]," action",["span",{"class":"token operator"},":"]," SetUserName ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"type"],["span",{"class":"token operator"},":"]," TypeKeys",["span",{"class":"token punctuation"},"."],["span",{"class":"token constant"},"SET_USER_NAME"],["span",{"class":"token punctuation"},","],"\n    name\n  ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token function"},"dispatch"],["span",{"class":"token punctuation"},"("],"action",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  \n",["h2",{"id":"9-mapdispatchtoprops-to-call-functions-that-change-state"},"\n  ",["a",{"class":"heading-link","href":"#9-mapdispatchtoprops-to-call-functions-that-change-state"},["app-icon",{"name":"link"}],"\n  9. mapDispatchToProps to call functions that change state\n  "],"\n"],"\n",["p",null,"We can now call that action from within a component."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/components/pages/my-user-info-page.tsx"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," State",["span",{"class":"token punctuation"},","]," Prop",["span",{"class":"token punctuation"},","]," h ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"@stencil/core\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Store ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"@stencil/redux\""],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," setUserName ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"../../../store/actions/user\""],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"my-name-input-component\""],"\n  ",["span",{"class":"token comment"},"// styleUrl: \"name-input-component.css\""],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"NameInputComponent"]," ",["span",{"class":"token punctuation"},"{"],"\n  storeUnsubscribe",["span",{"class":"token operator"},":"]," Unsubscribe",["span",{"class":"token punctuation"},";"],"\n  setUserName",["span",{"class":"token operator"},":"]," ",["span",{"class":"token keyword"},"typeof"]," setUserName",["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"State"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n  name",["span",{"class":"token operator"},":"]," MyAppState",["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"user\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"\"name\""],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"]," context",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"store\""]," ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n  store",["span",{"class":"token operator"},":"]," Store",["span",{"class":"token punctuation"},";"],"\n\n  ",["span",{"class":"token function"},"componentWillLoad"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"store",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"mapDispatchToProps"],["span",{"class":"token punctuation"},"("],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token punctuation"},"{"]," setUserName ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"storeUnsubscribe ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"store",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"mapStateToProps"],["span",{"class":"token punctuation"},"("],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token parameter"},"state",["span",{"class":"token operator"},":"]," MyAppState"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n      ",["span",{"class":"token keyword"},"const"]," ",["span",{"class":"token punctuation"},"{"],"\n        user",["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"{"]," name ",["span",{"class":"token punctuation"},"}"],"\n      ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token operator"},"="]," state",["span",{"class":"token punctuation"},";"],"\n      ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"{"],"\n        name\n      ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n    ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n\n  ",["span",{"class":"token function"},"componentDidUnload"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"storeUnsubscribe"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n\n  ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"("],"\n      ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"div"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"p"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"name",["span",{"class":"token punctuation"},"}"],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"p"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"input"],"\n          ",["span",{"class":"token attr-name"},"value"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"name",["span",{"class":"token punctuation"},"}"]],"\n          ",["span",{"class":"token attr-name"},"onInput"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token parameter"},"e"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"setUserName"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"("],"e",["span",{"class":"token punctuation"},"."],"target ",["span",{"class":"token keyword"},"as"]," ",["span",{"class":"token builtin"},"any"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},"."],"value",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},"}"]],"\n        ",["span",{"class":"token punctuation"},"/>"]],["span",{"class":"token plain-text"},"\n      "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"div"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["ol",null,"\n",["li",null,"Import the action"],"\n",["li",null,"Add the action and type it using ",["code",null,"typeof"]],"\n",["li",null,"Use mapDispatchToProps to map action to component class"],"\n"],"\n",["p",null,"If you're using redux devtools, you can now see that the action is being emitted each time you type into the input. The last step is to handle those actions to change your app state."],"\n\n",["h2",{"id":"10-handling-actions-to-mutate-your-app-state"},"\n  ",["a",{"class":"heading-link","href":"#10-handling-actions-to-mutate-your-app-state"},["app-icon",{"name":"link"}],"\n  10. handling actions to mutate your app state\n  "],"\n"],"\n",["p",null,"Back to our user reducer we'll import ",["code",null,"ActionTypes"]," and handle the action."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// /src/store/reducers/user.ts"],"\n",["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," ActionTypes",["span",{"class":"token punctuation"},","]," TypeKeys ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"\"./../actions/index\""],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"const"]," getInitialState ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token operator"},":"]," ",["span",{"class":"token parameter"},"UserState"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"{"],"\n    name",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"\"StencilJS\""],"\n  ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"const"]," user ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"("],"state ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token function"},"getInitialState"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},","]," action",["span",{"class":"token operator"},":"]," ActionTypes",["span",{"class":"token punctuation"},")"],["span",{"class":"token operator"},":"]," ",["span",{"class":"token parameter"},"UserState"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"switch"]," ",["span",{"class":"token punctuation"},"("],"action",["span",{"class":"token punctuation"},"."],["span",{"class":"token keyword"},"type"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"case"]," TypeKeys",["span",{"class":"token punctuation"},"."],["span",{"class":"token constant"},"SET_USER_NAME"],["span",{"class":"token operator"},":"]," ",["span",{"class":"token punctuation"},"{"],"\n      ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"{"]," ",["span",{"class":"token operator"},"..."],"state",["span",{"class":"token punctuation"},","]," name",["span",{"class":"token operator"},":"]," action",["span",{"class":"token punctuation"},"."],"name ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n    ",["span",{"class":"token punctuation"},"}"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n  ",["span",{"class":"token keyword"},"return"]," state",["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"default"]," user",["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  ",["p",null,"With that you've create a store, set the default state, mapped that state to your view components, emitted an action, updated the redux store, which triggered a rerender!!!"],"\n\n",["h3",{"id":"other-resources"},"\n  ",["a",{"class":"heading-link","href":"#other-resources"},["app-icon",{"name":"link"}],"\n  Other Resources\n  "],"\n"],"\n",["ul",null,"\n",["li",null,"Intro to Redux by Josh Morony ",["a",{"href":"https://www.youtube.com/watch?v=BccpaouJuxA"},"https://www.youtube.com/watch?v=BccpaouJuxA"]],"\n",["li",null,"State Management with Redux in Ionic & StencilJS: Loading Data by Josh Morony ",["a",{"href":"https://www.joshmorony.com/state-management-with-redux-in-ionic-stenciljs-loading-data/"},"https://www.joshmorony.com/state-management-with-redux-in-ionic-stenciljs-loading-data/"]],"\n"]]}