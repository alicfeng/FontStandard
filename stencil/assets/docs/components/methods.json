{"title":"Methods - Stencil","description":"methods","url":"/docs/methods","contributors":["jthoms1","manucorporat"],"headings":[{"id":"method-decorator","level":1,"text":"Method Decorator"},{"id":"public-methods-must-be-async","level":2,"text":"Public methods must be async"},{"id":"private-methods","level":2,"text":"Private methods"}],"srcPath":"./src/docs/components/methods.md","hypertext":["div",null,["h1",{"id":"method-decorator"},"\n  \n  Method Decorator\n  \n"],"\n",["p",null,"The ",["code",null,"@Method()"]," decorator is used to expose methods on the public API. Functions decorated with the ",["code",null,"@Method()"]," decorator can be called directly from the element, ie. they are intended to be callable from the outside!"],"\n",["blockquote",null,"\n",["p",null,"Developers should try to rely on publicly exposed methods as little as possible, and instead default to using properties and events as much as possible. As an app scales, we've found it's easier to manage and pass data through @Prop rather than public methods."],"\n"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Method ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"TodoList"]," ",["span",{"class":"token punctuation"},"{"],"\n\n  @",["span",{"class":"token function"},"Method"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n  ",["span",{"class":"token keyword"},"async"]," ",["span",{"class":"token function"},"showPrompt"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token comment"},"// show a prompt"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["p",null,"Call the method like this:"],"\n",["blockquote",null,"\n",["p",null,"Developers should ensure that the component is defined by using the whenDefined method of the custom element registry before attempting to call public methods."],"\n"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token punctuation"},"("],["span",{"class":"token keyword"},"async"]," ",["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"await"]," customElements",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"whenDefined"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'todo-list'"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token keyword"},"const"]," todoListElement ",["span",{"class":"token operator"},"="]," document",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"querySelector"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'todo-list'"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token keyword"},"await"]," todoListElement",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"showPrompt"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"]]],"\n  "],"\n  \n",["h2",{"id":"public-methods-must-be-async"},"\n  ",["a",{"class":"heading-link","href":"#public-methods-must-be-async"},["app-icon",{"name":"link"}],"\n  Public methods must be async\n  "],"\n"],"\n",["p",null,"Stencil's architecture is async at all levels which allows for many performance benefits and ease of use. By ensuring publicly exposed methods using the ",["code",null,"@Method"]," decorator return a promise:"],"\n",["ul",null,"\n",["li",null,["p",null,"Developers can call methods before the implementation was downloaded without componentOnReady(), which queues the method calls and resolves after the component has finished loading."],"\n"],"\n",["li",null,["p",null,"Interaction with the component is the same whether it still needs to be lazy-loaded, or is already fully hydrated."],"\n"],"\n",["li",null,["p",null,"By keeping a component's public API async, apps could move the components transparently to ",["a",{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API"},"Web Worker"]," and the API would still be the same."],"\n"],"\n",["li",null,["p",null,"Returning a promise is only required for publicly exposed methods which have the ",["code",null,"@Method"]," decorator. All other component methods are private to the component and are not required to be async."],"\n"],"\n"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token comment"},"// VALID: using async"],"\n@",["span",{"class":"token function"},"Method"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"async"]," ",["span",{"class":"token function"},"myMethod"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token number"},"42"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],"\n\n",["span",{"class":"token comment"},"// VALID: using Promise.resolve()"],"\n@",["span",{"class":"token function"},"Method"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token function"},"myMethod2"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token builtin"},"Promise"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"resolve"],["span",{"class":"token punctuation"},"("],["span",{"class":"token number"},"42"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],"\n\n",["span",{"class":"token comment"},"// VALID: even if it returns nothing, it needs to be async"],"\n@",["span",{"class":"token function"},"Method"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"async"]," ",["span",{"class":"token function"},"myMethod3"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token builtin"},"console"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"log"],["span",{"class":"token punctuation"},"("],["span",{"class":"token number"},"42"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"],"\n\n",["span",{"class":"token comment"},"// INVALID"],"\n@",["span",{"class":"token function"},"Method"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token function"},"notOk"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token number"},"42"],["span",{"class":"token punctuation"},";"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  \n",["h2",{"id":"private-methods"},"\n  ",["a",{"class":"heading-link","href":"#private-methods"},["app-icon",{"name":"link"}],"\n  Private methods\n  "],"\n"],"\n",["p",null,"Non-public methods can still be used to organize the business logic of your component and they do NOT have to return a Promise."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"Component"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token comment"},"// Since `getData` is not a public method exposed with @Method"],"\n  ",["span",{"class":"token comment"},"// it does not need to be async"],"\n  ",["span",{"class":"token function"},"getData"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"someData",["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n  ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"("],"\n      ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"div"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"getData"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},"}"],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"div"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "]]}