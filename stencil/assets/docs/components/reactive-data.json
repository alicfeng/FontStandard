{"title":"Reactive Data, Handling arrays and objects - Stencil","description":"Reactive Data, Handling arrays and objects","url":"/docs/reactive-data","contributors":["jthoms1"],"headings":[{"id":"reactive-data","level":1,"text":"Reactive Data"},{"id":"rendering-methods","level":2,"text":"Rendering methods"},{"id":"watch-decorator","level":2,"text":"Watch Decorator"},{"id":"handling-arrays-and-objects","level":2,"text":"Handling arrays and objects"},{"id":"updating-arrays","level":3,"text":"Updating arrays"},{"id":"updating-an-object","level":3,"text":"Updating an object"}],"srcPath":"./src/docs/components/reactive-data.md","hypertext":["div",null,["h1",{"id":"reactive-data"},"\n  \n  Reactive Data\n  \n"],"\n",["p",null,"Stencil components update when props or state on a component change. For performance and simplicity, Stencil only compares references for changes, and will not rerender when data inside of an array or object changes."],"\n\n",["h2",{"id":"rendering-methods"},"\n  ",["a",{"class":"heading-link","href":"#rendering-methods"},["app-icon",{"name":"link"}],"\n  Rendering methods\n  "],"\n"],"\n",["p",null,"When a component updates because of a state change (props or state change), the ",["a",{"href":"templating-jsx"},["code",null,"render()"]]," method is scheduled to run."],"\n\n",["h2",{"id":"watch-decorator"},"\n  ",["a",{"class":"heading-link","href":"#watch-decorator"},["app-icon",{"name":"link"}],"\n  Watch Decorator\n  "],"\n"],"\n",["p",null,"When a user updates a property, ",["code",null,"Watch"]," will fire the method it's attached to, and pass that method the new value of the prop along with the old value. ",["code",null,"Watch"]," is useful for validating props or handling side effects. The ",["code",null,"Watch"]," decorator does not fire when a component initially loads."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Prop",["span",{"class":"token punctuation"},","]," Watch ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"LoadingIndicator"]," ",["span",{"class":"token punctuation"},"{"],"\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," activated",["span",{"class":"token operator"},":"]," ",["span",{"class":"token builtin"},"boolean"],["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"Watch"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'activated'"],["span",{"class":"token punctuation"},")"],"\n  ",["span",{"class":"token function"},"watchHandler"],["span",{"class":"token punctuation"},"("],["span",{"class":"token parameter"},"newValue",["span",{"class":"token operator"},":"]," boolean",["span",{"class":"token punctuation"},","]," oldValue",["span",{"class":"token operator"},":"]," boolean"],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token builtin"},"console"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"log"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'The new value of activated is: '"],["span",{"class":"token punctuation"},","]," newValue",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  \n",["h2",{"id":"handling-arrays-and-objects"},"\n  ",["a",{"class":"heading-link","href":"#handling-arrays-and-objects"},["app-icon",{"name":"link"}],"\n  Handling arrays and objects\n  "],"\n"],"\n",["p",null,"To update array or object data, use the following techniques, which are fast-becoming a core part of the modern JavaScript  toolbox."],"\n\n",["h3",{"id":"updating-arrays"},"\n  ",["a",{"class":"heading-link","href":"#updating-arrays"},["app-icon",{"name":"link"}],"\n  Updating arrays\n  "],"\n"],"\n",["p",null,"For arrays, the standard mutable array operations such as ",["code",null,"push()"]," and ",["code",null,"unshift()"]," won't trigger a component update. Instead, non-mutable array operators should be used as they return a copy of a new array. These include ",["code",null,"map()"]," and ",["code",null,"filter()"],", and the ES6 spread operator syntax."],"\n",["p",null,"For example, to push a new item to an array, create a new array with the existing values and the new value at the end:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},"@",["span",{"class":"token function"},"State"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," items",["span",{"class":"token operator"},":"]," ",["span",{"class":"token builtin"},"string"],["span",{"class":"token punctuation"},"["],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token comment"},"// our original array"],"\n",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"items ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"["],["span",{"class":"token string"},"'ionic'"],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token string"},"'stencil'"],["span",{"class":"token punctuation"},","]," ",["span",{"class":"token string"},"'webcomponents'"],["span",{"class":"token punctuation"},"]"],["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token comment"},"// update the array"],"\n",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"items ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"["],"\n  ",["span",{"class":"token operator"},"..."],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"items",["span",{"class":"token punctuation"},","],"\n  ",["span",{"class":"token string"},"'awesomeness'"],"\n",["span",{"class":"token punctuation"},"]"]]],"\n  "],"\n  ",["p",null,"The ",["code",null,"...this.items"]," syntax is a relatively new feature of JavaScript that \"expands\" the given object in place. Read more about the Spread operator ",["a",{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator"},"here"],"."],"\n\n",["h3",{"id":"updating-an-object"},"\n  ",["a",{"class":"heading-link","href":"#updating-an-object"},["app-icon",{"name":"link"}],"\n  Updating an object\n  "],"\n"],"\n",["p",null,"The spread operator should also be used to update objects. As with arrays, mutating an object will not trigger a view update in Stencil, but returning a new copy of the object will. Below is an example:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},"@",["span",{"class":"token function"},"State"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," myCoolObject",["span",{"class":"token punctuation"},";"],"\n\n",["span",{"class":"token comment"},"// our original object"],"\n",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"myCoolObject ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"{"],"first",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"'1'"],["span",{"class":"token punctuation"},","]," second",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"'2'"],["span",{"class":"token punctuation"},"}"],"\n\n",["span",{"class":"token comment"},"// update our object"],"\n",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"myCoolObject ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token punctuation"},"{"]," ",["span",{"class":"token operator"},"..."],"myCoolObject",["span",{"class":"token punctuation"},","]," third",["span",{"class":"token operator"},":"]," ",["span",{"class":"token string"},"'3'"]," ",["span",{"class":"token punctuation"},"}"]]],"\n  "]]}